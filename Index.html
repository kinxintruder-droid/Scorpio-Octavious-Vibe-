<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scorpio Octavious Vibe | Official</title>
    <style>
        :root {
            --black: #000000;
            --deep-blue: #0a192f;
            --vibrant-blue: #007bff;
            --text: #e6f1ff;
            --card-bg: #112240;
            --accent: #64ffda;
        }

        body {
            margin: 0;
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--black); 
            color: var(--text);
            transition: background-color 0.5s ease;
        }

        body.logged-in { background-color: var(--deep-blue); }

        header {
            display: none;
            padding: 15px;
            background: rgba(0, 0, 0, 0.9);
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 2px solid var(--vibrant-blue);
        }

        .container { max-width: 500px; margin: auto; padding: 20px; padding-bottom: 100px; }
        .view { display: none; }
        .active { display: block; }

        /* Auth */
        .auth-card { text-align: center; margin-top: 50px; }
        .card { background: var(--card-bg); padding: 20px; border-radius: 15px; margin-bottom: 20px; border: 1px solid #233554; }
        input, select { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid var(--vibrant-blue); background: #020c1b; color: #fff; box-sizing: border-box; }
        
        .btn { width: 100%; padding: 12px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn-primary { background: var(--vibrant-blue); color: white; }
        .btn-outline { background: transparent; border: 1px solid var(--vibrant-blue); color: var(--vibrant-blue); }

        /* Bottom Nav */
        .bottom-nav {
            position: fixed; bottom: 0; width: 100%; background: #020c1b;
            display: none; justify-content: space-around; padding: 10px 0;
            border-top: 2px solid var(--vibrant-blue);
        }
        .nav-item { background: none; border: none; color: white; font-size: 0.7rem; cursor: pointer; text-align: center; }

        /* Chat & Messages */
        #chat-window, #msg-window { height: 200px; overflow-y: auto; background: #000; padding: 10px; border-radius: 10px; border: 1px solid var(--vibrant-blue); margin-bottom: 10px; }
        .msg { margin-bottom: 10px; padding: 8px; border-radius: 8px; max-width: 80%; }
        .msg-ai { background: #112240; color: var(--accent); }
        .msg-user { background: var(--vibrant-blue); margin-left: auto; }

        /* Reels */
        .reel-video { width: 100%; border-radius: 10px; aspect-ratio: 9/16; background: #000; }
        
        /* Profile Pic */
        .profile-circle { width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--accent); object-fit: cover; margin: 0 auto; display: block; }
        
        .status-dot { width: 10px; height: 10px; background: #4caf50; border-radius: 50%; display: inline-block; }
    </style>
</head>
<body id="mainBody">

<header id="appHeader">
    <div style="font-weight: bold; color: var(--vibrant-blue);">ü¶Ç SCORPIO</div>
    <input type="text" id="userSearch" placeholder="Search artists..." style="width: 50%; margin:0; padding: 5px;">
    <div id="notif-bell" style="cursor:pointer;">üîî<span id="notif-count" style="color:red; font-size:0.7rem;">2</span></div>
</header>

<div class="container">
    
    <div id="view-auth" class="view active">
        <div class="auth-card">
            <h1 style="color: var(--vibrant-blue);">Scorpio Vibe</h1>
            <div class="card">
                <h3 id="authTitle">Sign In</h3>
                <input type="email" id="authEmail" placeholder="Email Address">
                <input type="password" id="authPass" placeholder="Password">
                <button class="btn btn-primary" onclick="handleAuth()">Continue</button>
                <p onclick="toggleAuthMode()" id="toggleText" style="font-size: 0.8rem; cursor:pointer; margin-top:15px;">New here? Create Account</p>
            </div>
        </div>
    </div>

    <div id="view-home" class="view">
        <div id="reelsFeed"></div>
    </div>

    <div id="view-upload" class="view">
        <div class="card">
            <h2>Post Your Vibe</h2>
            <input type="text" id="postTitle" placeholder="Video Title">
            <input type="text" id="postUrl" placeholder="MP4 Video Link">
            <button class="btn btn-primary" onclick="createNewPost()">Post Video</button>
        </div>
    </div>

    <div id="view-msgs" class="view">
        <h2>Messages <span class="status-dot"></span> <small>Active</small></h2>
        <div class="card">
            <div id="msg-window"></div>
            <div style="display:flex; gap:5px;">
                <input type="text" id="msgInput" placeholder="Message friend...">
                <button class="btn btn-primary" style="width:auto; margin:0;" onclick="sendMsg()">Send</button>
            </div>
            <button class="btn btn-outline" onclick="startVideoCall()">üìû Start Video Call</button>
        </div>
    </div>

    <div id="view-ai" class="view">
        <h2 style="color: var(--accent);">Octavious AI</h2>
        <div class="card">
            <div id="chat-window"></div>
            <div style="display:flex; gap:5px;">
                <input type="text" id="aiInput" placeholder="Ask Octavious...">
                <button class="btn btn-primary" style="width:auto; margin:0;" onclick="askAI()">Ask</button>
            </div>
        </div>
    </div>

    <div id="view-wallet" class="view">
        <div class="card" style="background: linear-gradient(to right, #007bff, #000); text-align:center;">
            <p>Available Balance</p>
            <h1 id="wallBal">$0.00</h1>
            <small>https://wallet.scorpio-octavious-vibe.com</small>
        </div>
        <div class="card">
            <h3>Withdraw Funds</h3>
            <input type="number" id="drawAmount" placeholder="Enter Amount">
            <select id="method">
                <option>PayPal</option>
                <option>Bitcoin (BTC)</option>
            </select>
            <input type="text" id="payoutAddress" placeholder="Address or Email">
            <p style="font-size: 0.7rem; color: #aaa;">Verify your address before withdraw. It will be sent to this device/email.</p>
            <button class="btn btn-primary" onclick="withdraw()">Withdraw Now</button>
        </div>
    </div>

    <div id="view-profile" class="view">
        <div class="card" style="text-align:center;">
            <img id="pfp" src="https://via.placeholder.com/80" class="profile-circle" onclick="document.getElementById('fileIn').click()">
            <input type="file" id="fileIn" style="display:none" onchange="uploadPfp(this)">
            <h2 id="dispNick">User_Name</h2>
            <input type="text" id="nickInput" placeholder="Change Nickname">
            <button class="btn btn-outline" onclick="saveNick()">Update Profile</button>
            
            <div style="display:flex; justify-content: space-around; margin:20px 0;">
                <div><strong>842</strong><br>Friends</div>
                <div><strong>2.1k</strong><br>Followers</div>
            </div>

            <hr>
            <h3>Vibe Marketing Shop</h3>
            <div style="display:flex; justify-content: space-between; align-items:center;">
                <span>Gold Badge üõ°Ô∏è</span>
                <button class="btn btn-primary" style="width:auto;" onclick="buyItem('Gold Badge', 4.99)">$4.99</button>
            </div>
            <div style="display:flex; justify-content: space-between; align-items:center;">
                <span>Pro Filter Pack ‚ú®</span>
                <button class="btn btn-primary" style="width:auto;" onclick="buyItem('Pro Filter', 2.45)">$2.45</button>
            </div>
            <p style="font-size:0.6rem; color:red;">* No refunds after purchase.</p>

            <button class="btn" style="background:#cc0000; color:#fff; margin-top:20px;" onclick="logout()">Sign Out</button>
        </div>
    </div>

</div>

<nav class="bottom-nav" id="botNav">
    <button class="nav-item" onclick="show('home')">üè†<br>Home</button>
    <button class="nav-item" onclick="show('upload')">‚ûï<br>Post</button>
    <button class="nav-item" onclick="show('msgs')">üí¨<br>Chat</button>
    <button class="nav-item" onclick="show('ai')">ü§ñ<br>AI</button>
    <button class="nav-item" onclick="show('wallet')">üí∞<br>Wallet</button>
    <button class="nav-item" onclick="show('profile')">üë§<br>Me</button>
</nav>

<script>
    // --- DATABASE LOGIC (Local Storage) ---
    let currentUser = localStorage.getItem('scorpio_session');
    let users = JSON.parse(localStorage.getItem('scorpio_users')) || {};
    let isSignup = false;

    // --- STATE MANAGEMENT ---
    function save() {
        if(currentUser) {
            localStorage.setItem('scorpio_users', JSON.stringify(users));
        }
    }

    // --- AUTH ---
    function toggleAuthMode() {
        isSignup = !isSignup;
        document.getElementById('authTitle').innerText = isSignup ? "Create Account" : "Sign In";
        document.getElementById('toggleText').innerText = isSignup ? "Already have an account? Login" : "New here? Create Account";
    }

    function handleAuth() {
        const email = document.getElementById('authEmail').value;
        const pass = document.getElementById('authPass').value;

        if(!email || !pass) return alert("Fill details");

        if(isSignup) {
            if(users[email]) return alert("User exists");
            users[email] = {
                email, pass, 
                nickname: "NewViber", 
                pfp: "https://via.placeholder.com/80",
                balance: 0.00,
                reels: [],
                msgs: []
            };
            alert("Account Created!");
        }

        if(users[email] && users[email].pass === pass) {
            currentUser = email;
            localStorage.setItem('scorpio_session', email);
            enterApp();
        } else {
            alert("Invalid Credentials");
        }
        save();
    }

    function enterApp() {
        document.getElementById('mainBody').classList.add('logged-in');
        document.getElementById('view-auth').classList.remove('active');
        document.getElementById('appHeader').style.display = 'flex';
        document.getElementById('botNav').style.display = 'flex';
        show('home');
        refreshUI();
    }

    function logout() {
        localStorage.removeItem('scorpio_session');
        location.reload();
    }

    // --- NAVIGATION ---
    function show(id) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.getElementById('view-' + id).classList.add('active');
    }

    // --- REELS & EARNINGS ---
    function createNewPost() {
        const title = document.getElementById('postTitle').value;
        const url = document.getElementById('postUrl').value;
        if(title && url) {
            users[currentUser].reels.unshift({
                title, url, 
                views: Math.floor(Math.random() * 50), // Initial views
                likes: 0,
                owner: currentUser
            });
            save();
            show('home');
            refreshUI();
        }
    }

    function refreshUI() {
        const user = users[currentUser];
        document.getElementById('dispNick').innerText = user.nickname;
        document.getElementById('pfp').src = user.pfp;
        
        // Calculate balance: $5 per 100 views, $3 per 100 likes
        let totalEarned = 0;
        user.reels.forEach(r => {
            totalEarned += (r.views * 0.05) + (r.likes * 0.03);
        });
        user.balance = totalEarned;
        document.getElementById('wallBal').innerText = `$${user.balance.toFixed(2)}`;

        const feed = document.getElementById('reelsFeed');
        feed.innerHTML = "";
        
        // Show all reels from all users
        Object.keys(users).forEach(uEmail => {
            users[uEmail].reels.forEach((reel, index) => {
                const isMine = (uEmail === currentUser);
                feed.innerHTML += `
                    <div class="card">
                        <h4>${reel.title} <small>by ${users[uEmail].nickname}</small></h4>
                        <video class="reel-video" src="${reel.url}" controls></video>
                        <div style="display:flex; justify-content:space-between; margin-top:10px;">
                            <span>üëÅ ${reel.views} Views</span>
                            <button onclick="likeReel('${uEmail}', ${index})" ${isMine ? 'disabled' : ''} style="color:${isMine?'#555':'#64ffda'}; background:none; border:none; cursor:pointer;">
                                ‚ù§Ô∏è ${reel.likes} ${isMine ? '(Self-like blocked)' : 'Like'}
                            </button>
                            <button onclick="shareLink()" style="background:none; border:none; color:var(--vibrant-blue);">üîó Share</button>
                        </div>
                    </div>
                `;
            });
        });
        save();
    }

    function likeReel(ownerEmail, idx) {
        users[ownerEmail].reels[idx].likes += 1;
        save();
        refreshUI();
    }

    function shareLink() {
        prompt("Invite Friends & Earn!", "https://Scorpio-octavious-vibe.com/invite?ref=" + currentUser);
    }

    // --- MESSAGES ---
    function sendMsg() {
        const val = document.getElementById('msgInput').value;
        if(!val) return;
        const win = document.getElementById('msg-window');
        win.innerHTML += `<div class="msg msg-user"><b>You:</b> ${val}</div>`;
        document.getElementById('msgInput').value = "";
        win.scrollTop = win.scrollHeight;
    }

    function startVideoCall() {
        alert("Requesting Video Call... Connection established with " + users[currentUser].nickname + "'s friend.");
    }

    // --- AI CHAT ---
    function askAI() {
        const input = document.getElementById('aiInput');
        const box = document.getElementById('chat-window');
        if(!input.value) return;

        box.innerHTML += `<div class="msg msg-user">${input.value}</div>`;
        const responses = ["Stay focused on your vibe!", "You are growing fast!", "Octavious is here to help you conquer!"];
        const pick = responses[Math.floor(Math.random() * responses.length)];

        setTimeout(() => {
            box.innerHTML += `<div class="msg msg-ai"><b>Octavious:</b> ${pick}</div>`;
            box.scrollTop = box.scrollHeight;
        }, 600);
        input.value = "";
    }

    // --- WALLET ---
    function withdraw() {
        const amt = document.getElementById('drawAmount').value;
        const addr = document.getElementById('payoutAddress').value;
        if(amt > users[currentUser].balance) return alert("Insufficient funds");
        alert(`Broadcasted to Blockchain. $${amt} will arrive at ${addr} shortly.`);
    }

    // --- PROFILE ---
    function saveNick() {
        const n = document.getElementById('nickInput').value;
        if(n) {
            users[currentUser].nickname = n;
            save();
            refreshUI();
            alert("Nickname Saved!");
        }
    }

    function uploadPfp(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = (e) => {
                users[currentUser].pfp = e.target.result;
                save();
                refreshUI();
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function buyItem(name, price) {
        alert(`Redirecting to https://wallet.scorpio-octavious-vibe.com to complete $${price} payment for ${name}. No refunds.`);
    }

    // INITIALIZE
    if(currentUser && users[currentUser]) {
        enterApp();
    }
</script>
</body>
      </html>
  
